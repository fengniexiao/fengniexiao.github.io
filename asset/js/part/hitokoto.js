!function(){return function e(t,o,r){function n(a,i){if(!o[a]){if(!t[a]){var s="function"==typeof require&&require;if(!i&&s)return s(a,!0);if(u)return u(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=o[a]={exports:{}};t[a][0].call(d.exports,function(e){return n(t[a][1][e]||e)},d,d.exports,e,t,o,r)}return o[a].exports}for(var u="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}}()({1:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});o.default=(e=>{if(!e.method||!e.url)return;let t=new XMLHttpRequest;if(t.open(e.method,e.url+"?"+(e=>{if("object"!=typeof e)return"";let t=[];for(const o in e)if(e.hasOwnProperty(o)){const r=e[o];t.push(window.encodeURIComponent(o)+"="+window.encodeURIComponent(r))}return t.join("&")})(e.data)),t.timeout=3e4,"post"===e.method.toLowerCase()&&t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.headers)for(const o in e.headers)e.headers.hasOwnProperty(o)&&t.setRequestHeader(o,e.headers[o]);e.timeout&&(t.timeout=e.timeout),e.dataType&&(t.responseType=e.dataType),t.addEventListener("readystatechange",()=>{4===t.readyState&&200===t.status&&t.response?e.success&&e.success(t.response):t.status>400&&e.error(t.status)}),e.error&&(t.addEventListener("error",t=>{e.error(t)}),t.addEventListener("timeout",t=>{e.error(t)})),t.send(e.data?e.data:null)})},{}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t){let o=document.querySelector(`.p-${e}`);o?(t&&t(o),o.classList.remove("HIDE")):(0,u.default)({url:`/asset/part/${e}.html`,method:"get",dataType:"document",success(e){t&&t(e.body.firstElementChild)}})};var r,n=e("./ajax.js"),u=(r=n)&&r.__esModule?r:{default:r}},{"./ajax.js":1}],3:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=u(e("../common/part.js")),n=u(e("../common/ajax.js"));function u(e){return e&&e.__esModule?e:{default:e}}let a="hitokoto",i=null,s=null,l=!1;let d=null;const c=e=>{if(!i||l)return;window.clearTimeout(d),window.clearInterval(s);let t=i.getAttribute("data-type");(0,n.default)({url:i.getAttribute("data-api"),method:"get",dataType:"json",data:{c:null===t||"r"===t?"":t},success:e=>{e.hitokoto=e.hitokoto.trim();let t=0;s=window.setInterval(o=>{if(0===i.querySelector(".p-hitokoto-content").innerText.length)window.clearInterval(s),s=window.setInterval(o=>{t>e.hitokoto.length?(window.clearInterval(s),window.clearTimeout(d),l=!1,d=window.setTimeout(c,96e3)):i.querySelector(".p-hitokoto-content").innerText=e.hitokoto.substr(0,t++)},160),void 0===e.from_who||null===e.from_who||""===e.from_who.trim()?i.querySelector(".p-hitokoto-name").innerText=e.from.trim():i.querySelector(".p-hitokoto-name").innerText=e.from_who.trim();else{let e=i.querySelector(".p-hitokoto-content").innerText;i.querySelector(".p-hitokoto-content").innerText=e.substr(0,e.length-1),l=!0}},160)}})};o.default={tag:a,init:(e,t)=>{(0,r.default)(a,e=>{i=e,document.querySelector(a)&&document.querySelector(a).replaceWith(i),t&&t(i)})},update:c}},{"../common/ajax.js":1,"../common/part.js":2}]},{},[3]);