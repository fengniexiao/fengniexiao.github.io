[{"title":"使用 Mustom 主题经过和报错","url":"/posts/1/","content":"\n- 主题使用流程\n- 主题过程中报错及解决\n\n<!-- more -->\n\n# 下载Mustom主题\n\n**注：主题文件可以下载[本站](//github.com/jinyaoMa/ma-jinyao.cn)所有源代码后，通过复制粘贴`themes/mustom`文件夹获得**\n**注：以下文件及文件夹都是使用Mustom主题必要的结构**\n\n先来看看[主题](//github.com/jinyaoMa/ma-jinyao.cn)的根目录结构。\n\n```\n├─scaffolds    : 模板\n├─source       : 内容资源文件夹\n├─themes       : 下载的主题放这里\n├─package.json : 里面可以看都用了什么没有魔改过的Hexo插件\n├─_config.yml  : 根配置文件\n```\n\n这就是一个普通Hexo建站的初始结构。这里主要讲下，**使用Mustom主题时，可以使用`scaffolds`里的模板，里面包含了必要的front-matter变量。可以复制粘贴整个`scaffolds`文件去覆盖原本的文件夹。\n\n# 安装依赖\n\n**推荐按照下载源码里的`package.json`来安装依赖，因为基本上安装的依赖都是用于优化和兼容。可以复制粘贴本站的`package.json`去替换原本的文件，之后运行命令`npm i`安装依赖。安装时可能会因为版本不同有报错，对报缺失的依赖可单独安装。**\n```\n\"devDependencies\": {\n    \"babel-cli\": \"^6.26.0\",\n    \"babel-preset-env\": \"^1.7.0\"\n  }\n```\n\n# _config.yml根配置使用主题Mustom\n\n```\n#替换博客名字\n# Site\ntitle: \"风潇- 博客网站 | FengXiao - Blog\"\nsubtitle: ''\ndescription: \"风潇- 博客网站 | FengXiao - Blog\"\nkeywords:\nauthor: Feng Xiao\nlanguage: en\ntimezone: ''\n\n#修改博客指向网站\n# If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'\nurl: http://fxblog.cbomc.top\n\n#修改主题为Mustom\n# Extensions\n## Plugins: https://hexo.io/plugins/\n## Themes: https://hexo.io/themes/\ntheme: mustom\n\n#修改博客地址和链接仓库\n# Deployment\n## Docs: https://hexo.io/docs/deployment.html\ndeploy:\n  type: git\n  repo: git@github.com:fengniexiao/fengniexiao.github.io.git\n  branch: master\n```\n\n# hexo g报错import and export may appear with 'sourceType:moudule'\n\n**在报错文件目录下添加文件.babelrc**\n```\n{\n  \"presets\": [\n    [\"env\", {\n      \"targets\": {\n        \"node\": \"10.15.3\"\n      }      \n    }]\n  ]\n}\n```\n\n# 将主题部署\n**cmd进入博客的根目录，在根目录下执行hexo clean , hexo g , hexo s**\n\n","categories":["Hexo"],"tags":["Mustom"]},{"title":"Github Page+Hexo 搭建博客使用主题教程","url":"/posts/2/","content":"\n- 使用Github Page+Hexo搭建技术博客\n- 应用主题\n- 优化博客\n\n<!-- more -->\n\n# 前言\n\n**Github Page 是 Github 提供的一种免费的静态网页托管服务，可以用来托管博客、项目官网等静态网页。Hexo博客框架 编译静态资源。准备好GitHub。图床工具：微博图床**\n**下面开始了~**\n\n# 准备好环境\n\n**安装node**\n***Node.js 官方网站下载：(https://nodejs.org/zh-cn/)***\n![8ZFOD~2[%TXOVM@KSZ~5BMK.png](http://ww1.sinaimg.cn/large/e92dbddbgy1gghi8mzr6kj20y90ox77j.jpg)\n***双击打开安装，下一步下一步即可***\n![1033899-20190901100914627-1885403639.png](http://ww1.sinaimg.cn/large/e92dbddbgy1gghi89w5htj20h60dfmxq.jpg)\n***安装完成后默认会将模块安装在C:\\Users\\用户名\\AppData\\Roaming路径下的npm和npm_cache中，不方便管理且占用C盘空间,可更改目录（其中，npm随安装程序自动安装，作用就是对Node.js依赖的包进行管理）***\n***配置自定义的全局模块安装目录，在node.js安装目录下新建两个文件夹 node_global和node_cache，然后在cmd命令下执行如下两个命令：***\n```\nnpm config set prefix \"D:\\Program Files\\nodejs\\node_global\"\nnpm config set cache \"D:\\Program Files\\nodejs\\node_cache\"\n```\n***执行完后，配置环境变量，如下：***\n\t环境变量” -> “系统变量”：新建一个变量名为 “NODE_PATH”， 值为“D:\\Program Files\\nodejs\\node_global\\node_modules”\n\t环境变量” -> “用户变量”：编辑用户变量里的Path，将相应npm的路径（“C:\\Users\\用户名\\AppData\\Roaming\\npm”）改为：“D:\\Program Files\\nodejs\\node_global”\n***配置完成，测试：***\n在cmd命令下执行 npm install webpack -g 安装webpack\n![1033899-20190901104806487-238482989.png](http://ww1.sinaimg.cn/large/e92dbddbgy1gghi7vh6joj20fl05kt97.jpg)\n**建好自己的GitHub Page仓库**\n***新建好一个仓库***仓库名默认为用户名.github.io\n![X6Z]X3XPAQQ8S80MDCV$D5X.png](http://ww1.sinaimg.cn/large/e92dbddbgy1gghig57xbkj20rw0n0myx.jpg)\n***设置仓库***\n![B87H)]5LOZLNMB63T%GD3}J.png](http://ww1.sinaimg.cn/large/e92dbddbgy1gghify3l34j210l0lgju5.jpg)\n默认访问地址为https://用户名.github.io，可设置Custom domain改为指定域名，需要去域名管理中解析域名到仓库对应ip地址(仓库ip地址可cmd中ping 默认访问地址得到)\n**GitHub仓库关联本地**\n要使用 git 工具首先要配置一下SSH key，为部署本地博客到 Github 做准备,命令行输入 cd ~/.ssh无报错可直接使用 cat ~/.ssh/id_rsa.pub 命令查看本机上的 SSH key。\n如果之前没有创建，则执行以下命令全局配置一下本地账户\n```\ngit config --global user.name \"用户名\"\ngit config --global user.email \"邮箱地址\"\nssh-keygen -t rsa -C '邮箱'\n```\n按照提示完成三次回车，即可生成 ssh key。\n首次使用还需要确认并添加主机到本机SSH可信列表。若返回 Hi xxx! You've successfully authenticated, but GitHub does not provide shell access. 内容，则证明添加成功。\n登录 Github 上添加刚刚生成的SSH key\n![2606323609-5c47cdffae293_articlex.jpg](http://ww1.sinaimg.cn/large/e92dbddbgy1gghisxq9xpj20m809mabr.jpg)\n\n# 安装Hexo，并创建一个blog\n\n**使用 npm 开始安装 Hexo **\n```npm install -g hexo-cli```\n**安装 Hexo 完成后，再执行下列命令，Hexo 将会在指定文件夹中新建所需要的文件。**\n```\nhexo init Blog\ncd Blog\nnpm install\n```\n**如果上面的命令都没报错的话，就恭喜了，运行 hexo s 命令，其中 s 是 server 的缩写，在浏览器中输入 http://localhost:4000 回车就可以预览效果了。**\n```\nhexo clean #清除\nhexo g #生成静态文件\nhexo s #本地预览\nhexo d #部署\n```\n\n# 使用hexo中自己选择好的主题\n\n**可以到[官网主题页](https://hexo.io/themes/)或者网上找你喜欢的，很多都不错，我使用的是 Mustom 主题。**\n![ILS{BXU_RW4L41V0OY1LN}5.png](http://ww1.sinaimg.cn/large/e92dbddbgy1gghj5zw69xj21ha0pk1kx.jpg)\n**将主题下载到目录themes下，修改根目录下的_config.yml文件的Extensions**\n```\n# Extensions\n## Plugins: https://hexo.io/plugins/\n## Themes: https://hexo.io/themes/\ntheme: mustom\n```\n\n# 静态图床\n\n**在文章中会不时插入图片，这时需要个图床来管理生成，去chrome网上应用商店下载一个叫微博图床的chrome插件，下图是插件的界面，操作简单方便，具体使用看说明就可以啦，比较简单**\n![O8Q99BO0DZ%3_77[~IRL}4A.png](http://ww1.sinaimg.cn/large/e92dbddbgy1gghjaq80v4j20ws0mojvq.jpg)\n\n# 优化博客\n\n**添加 valine 评论系统**\n打开 主题_config.yml 文件，搜索 valine，开启 valine，设置 enable 为 true\n![D$`I2SOSI@PLHFH59OJXGEC.png](http://ww1.sinaimg.cn/large/e92dbddbgy1gghjghkmctj20i804adhb.jpg)\n然后到 leanCloud 登录或者注册 一个账号，注册后登录创建一个应用，然后进入应该到设置里面找到 AppId 和 AppKey 复制粘贴到主题配置文件里面对应的地方，就是上图中的 appid 和 appkey 这两个地方。\n**添加字数统计和阅读时长**\n安装一个插件\n```npm install hexo-symbols-count-time --save```\n接着博客根目录下的配置文件里添加以下配置\n```\n# 文章字数统计\nsymbols_count_time:\n  symbols: true\n  time: true\n  total_symbols: true\n  total_time: true\n```\n最后到主题的配置文件下开启 symbols_count_time 字段\n**还可添加其他功能，如有需要自行查看官方文档或百度**\n\n# 部署到GitHub\n\n**在cmd中执行hexo clean，hexo g,hexo d部署到github上**\n\n# 优化访问\n\n**代码同时部署到 coding**\n流程类型github。\n在根目录下的 _config.yml 配置文件中的部署配置里，把 coding 的 git 地址添加进去就行了\n![%4I`[4}]]9M6C1WOO{JV]`G.png](http://ww1.sinaimg.cn/large/e92dbddbgy1gghjqhjadbj20o60650v8.jpg)\n执行hexo clean, hexo g, hexo d会部署到GitHub和coding上\n**百度站长平台添加网站管理**\n注册百度站长工具，并添加网站\n![}]3}OO_[@PELI$IC7G(7GKN.png](http://ww1.sinaimg.cn/large/e92dbddbgy1gghju6qc7kj21c10eeae4.jpg)\n可以直接在主题的配置文件下搜索 baidu_site_verification 后面填上第三步中 meta 标签中 content 的值就可以\n最后点完成验证就可以通过了。\n**添加蜘蛛协议robots.txt**\n增加 robots.txt 文件，就是蜘蛛协议，新建 robots.txt 文件添加以下内容，把 robots.txt 放在 /source 文件下\n```\n# hexo robots.txt\nUser-agent: *\nAllow: /\nAllow: /archives/\n\nDisallow: /vendors/\nDisallow: /js/\nDisallow: /css/\nDisallow: /fonts/\nDisallow: /vendors/\nDisallow: /fancybox/\n\nSitemap: 域名/sitemap.xml\nSitemap: 域名/baidusitemap.xml\n```\n完成后，重启hexo，执行 hexo g -d 重新生成文件并提交后，在public目录下会生成对应的xml文件。\n**主动推送**\n安装第三方插件 hexo-baidu-url-submit 进行主动推送\n```npm install hexo-baidu-url-submit --save```\n添加配置到根目录下的配置文件里\n```\n# 百度链接提交-主动推送配置\nbaidu_url_submit:\n  count: 3 ## 提交最新的一个链接\n  host: pojian.xyz ## 在百度站长平台中注册的域名\n  token: 3GIEYsuq5ZTkvDBm ## 请注意这是您的秘钥，所以请不要把博客源代码发布在公众仓库里!\n  path: baidu_urls.txt ## 文本文档的地址， 新链接会保存在此文本文档里\n```\n添加新的部署配置，注意这里跟之前有点不一样，要在 type 前添加一个破折号 -\n```\ndeploy:\n  - type: git\n    repo:\n      github: \n      coding: \n  - type: baidu_url_submitter\n```\n***实现原理***\n\t新链接的产生， hexo generate 会产生一个文本文件，里面包含最新的链接\n\t新链接的提交， hexo deploy 会从上述文件中读取链接，提交至百度搜索引擎\n**还可进行其他优化，如有需要自行查看官方文档或百度**\n\n\n\n\n\n\n\n\n\n\n","categories":["Hexo"],"tags":["Github Page"]},{"title":"Hexo 主题 Mustom 使用指南（对应主题 1.0 版）","url":"/posts/55821/","content":"\n- 主题[Mustom](//github.com/jinyaoMa/hexo-theme-mustom)是jinyaoMa参考了卡片式和窗口展示的样式设计的Hexo主题。\n- 主题通过大量的replaceWith函数和PJAX来加载，而且用了Live2D的插件，初始加载时回流特别厉害。\n- 主题可以衍生一个CSS的框架，但是作者本人目前还是在给每个组件都弄一个单独的样式表。\n- 主题把各类资源文件都分门别类了，在以后添加内容方面应该还是较方便的。\n\n<!-- more -->\n\n# Hexo根目录结构\n\n**注：主题文件可以下载[本站](//github.com/jinyaoMa/ma-jinyao.cn)所有源代码后，通过复制粘贴`themes/mustom`文件夹获得，或者下载[Mustom](//github.com/jinyaoMa/hexo-theme-mustom)所有源代码获得**\n**注：以下文件及文件夹都是使用Mustom主题必要的结构**\n\n先来看看[主题](//github.com/jinyaoMa/ma-jinyao.cn)的根目录结构。\n\n```\n├─scaffolds    : 模板\n├─source       : 内容资源文件夹\n├─themes       : 下载的主题放这里\n├─package.json : 里面可以看我都用了什么没有魔改过的Hexo插件\n├─_config.yml  : 根配置文件\n```\n\n这就是一个普通Hexo建站的初始结构。这里主要讲下，**使用Mustom主题时，可以使用`scaffolds`里我的模板，里面包含了必要的front-matter变量。可以复制粘贴整个`scaffolds`文件去覆盖原本的文件夹。推荐按照[本站](//github.com/jinyaoMa/ma-jinyao.cn)里的`package.json`来安装依赖，因为基本上安装的依赖都是用于优化和兼容。可以复制粘贴本站的`package.json`去替换原本的文件，之后运行命令`npm i`安装依赖。之后所有的例子默认都使用了我的模板和依赖之后的操作。**\n\n# _config.yml根配置文件\n\n**注：使用主题的你可以在上面添加变量和修改变量的值，但是最好不要删除某一个变量，你可以留个空字符串**\n**可以在复制粘贴以下配置之后，通过网站效果慢慢改**\n\n``` yml\n# Hexo Configuration\n## Docs: https://hexo.io/docs/configuration.html\n## Source: https://github.com/hexojs/hexo/\n\n# Site\ntitle: \"耀 の 个人网站 | Mark の Personal Website\"\ndescription: \"耀の个人网站, 耀的个人网站, Mark の Personal Website, Mark's Personal Website, 耀的部落阁, 耀の部落阁, jinyaoMa, Mustom, Hexo\"\nauthor: jinyaoMa ( 耀 / Mark )\nyear: 2019 # 建站年\n\n# URL\n## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'\nurl: https://ma-jinyao.cn\nroot: /\n\n# Directory\nsource_dir: source\npublic_dir: docs # 方便使用Github Page\ntag_dir: tags\narchive_dir: archives\ncategory_dir: categories\ncode_dir: code # markdown使用include_code标签\nskip_render:\n  - \"code/*.*\" # 排除code_dir\n  - \"extension/**/*.html\" # 排除extension\n  - \"*.html\" # 如果在在主目录source文件夹里放了搜索引擎验证的.html文件\n  - \"CNAME\" # 如果在在主目录source文件夹里放了CNAME文件\n\n# Writing\nnew_post_name: :title.md # File name of new posts\ndefault_layout: post\ntitlecase: false # Transform title into titlecase\nexternal_link:\n  enable: true # Open external links in new tab\n  field: site # Apply to the whole site\n  exclude: \"\"\nfilename_case: 0\nrender_drafts: false\npost_asset_folder: false\nrelative_link: false\nfuture: true\nhighlight:\n  enable: true\n  line_number: true\n  auto_detect: false\n  tab_replace: \"  \"\n  wrap: true\n  hljs: false\n\n# Date / Time format\n## Hexo uses Moment.js to parse and display date\n## You can customize the date format as defined in\n## http://momentjs.com/docs/#/displaying/format/\ndate_format: YYYY-MM-DD\ntime_format: HH:mm:ss\n## Use post's date for updated date unless set in front-matter\nuse_date_for_updated: false\n\n# Extensions\n## Plugins: https://hexo.io/plugins/\n## Themes: https://hexo.io/themes/\ntheme: mustom\n\n# Deployment\n## Docs: https://hexo.io/docs/deployment.html\ndeploy:\n  - type: baidu_url_submitter\n  - type: git\n    repo:\n\nall_minifier: true # 如果装了 hexo-all-minifier\nmarkdown: # 如果换了原装 hexo-renderer-marked, 用了 hexo-renderer-markdown-it\n  render:\n    html: true\n    xhtmlOut: false\n    breaks: true\n    linkify: true\n    typographer: true\n    quotes: '“”‘’'\n  plugins:\n    - markdown-it-abbr\n    - markdown-it-footnote\n    - markdown-it-ins\n    - markdown-it-sub\n    - markdown-it-sup\n  anchors:\n    level: 1\n    collisionSuffix: 'v'\n    permalink: true\n    permalinkClass: headerlink\n    permalinkSide: 'left'\n    permalinkSymbol: ''\nnofollow: # 如果装了 hexo-filter-nofollow\n  enable: true\n  field: post\nsitemap: # 如果装了 hexo-generator-sitemap\n  path: sitemap.xml\n  rel: true\nautoprefixer: # 如果装了 hexo-autoprefixer\n  exclude:\n    - \"*.min.css\"\n  overrideBrowserslist:\n    - \"last 2 versions\"\nbabelify: # 如果装了 hexo-renderer-babelify + @babel/preset-env\n  presets:\n    - \"@babel/preset-env\"\n  sourceMaps: false\nmathjax: # 如果装了 hexo-filter-mathjax\n  tags: none # or 'ams' or 'all'\n  single_dollars: true # enable single dollar signs as in-line math delimiters\n  cjk_width: 0.9 # relative CJK char width\n  normal_width: 0.6 # relative normal (monospace) width\n\nignore:\n  - \"**/source/asset/js/common/*.js\" # 如果装了 hexo-renderer-babelify\n  - \"**/source/asset/js/part/*.js\" # 如果装了 hexo-renderer-babelify\n  - \"**/source/asset/js/plugin/!(L2Dwidget.0.min.js)\" # 如果装了 hexo-renderer-babelify\n\n# 百度主动推送\nbaidu_url_submit:\n  count: 1000 # 提交最新的一个链接\n  host: ma-jinyao.cn # 在百度站长平台中注册的域名\n  token: \"\" # 请注意这是您的秘钥， 所以请不要把博客源代码发布在公众仓库里!\n  path: baidu_urls.txt # 文本文档的地址， 新链接会保存在此文本文档里\n\nbaidu_translate: # 用于划词翻译组件\n  appid: \"\"\n  appkey: \"\"\n\nvaline: # 用于评论组件\n  appid: \"\"\n  appkey: \"\"\n\n# 搜索引擎验证\ngoogle_site_verification: \"\"\nbaidu_site_verification: \"\"\n```\n\n# themes/mustom目录结构\n\n接下来看看[themes/mustom](//github.com/jinyaoMa/ma-jinyao.cn/tree/master/themes/mustom)的目录结构。\n\n```\n├─_config.yml : 主题配置文件，改菜单、改图标、改皮肤、改音乐/一言组件配置、新增组件时涉及\n├─source : 主题资源文件夹\n|   ├─browser.ejs : 不用babelify时旧浏览器会重定向到这个页面\n|   ├─robots.txt\n|   ├─sw.tpl : pwa需要加载的service worker模板\n|   ├─asset\n|   |   ├─part : 所有组件模板文件放这\n|   |   |  ├─audioplayer.ejs\n|   |   |  ├─brand.ejs\n|   |   |  ├─codelib.ejs\n|   |   |  ├─comment.ejs\n|   |   |  ├─extension.ejs\n|   |   |  ├─footer.ejs\n|   |   |  ├─gallery.ejs\n|   |   |  ├─goingto.ejs\n|   |   |  ├─hitokoto.ejs\n|   |   |  ├─menus.ejs\n|   |   |  ├─page.ejs\n|   |   |  ├─panels.ejs\n|   |   |  ├─pather.ejs\n|   |   |  ├─post.ejs\n|   |   |  ├─recentposts.ejs\n|   |   |  ├─records.ejs\n|   |   |  ├─search.ejs\n|   |   |  ├─settings.ejs\n|   |   |  ├─sitename.ejs\n|   |   |  ├─skin.ejs\n|   |   |  ├─timeline.ejs\n|   |   |  ├─toc.ejs\n|   |   |  ├─translater.ejs\n|   |   |  ├─xaside.ejs\n|   |   |  ├─xcanvas.ejs\n|   |   |  ├─xdrawer.ejs\n|   |   |  └xsearch.ejs\n|   |   ├─live2d : Live2D的文件放这\n|   |   |   ├─haruto.model.json\n|   |   |   ├─haruto.physics.json\n|   |   |   ├─mtn\n|   |   |   |  ├─01.mtn\n|   |   |   |  ├─02.mtn\n|   |   |   |  ├─03.mtn\n|   |   |   |  ├─04.mtn\n|   |   |   |  ├─05.mtn\n|   |   |   |  ├─06.mtn\n|   |   |   |  ├─07.mtn\n|   |   |   |  ├─08.mtn\n|   |   |   |  ├─09.mtn\n|   |   |   |  └idle_02.mtn\n|   |   |   ├─moc\n|   |   |   |  ├─haruto.moc\n|   |   |   |  ├─haruto.2048\n|   |   |   |  |      └texture_00.png\n|   |   ├─lang : 所有的语言界面资源文件放这\n|   |   |  ├─en.yml : 英文\n|   |   |  └zh-cn.yml : 中文\n|   |   ├─js : 所有的JS资源文件放这\n|   |   | ├─main.js : 管理所有资源的加载和程序\n|   |   | ├─nomodule.js : 不使用babelify时用得到的旧浏览器重定向\n|   |   | ├─plugin : 所有第三方JS插件模块\n|   |   | |   ├─APlayer.min.js\n|   |   | |   ├─av-min.js\n|   |   | |   ├─evanyou.js\n|   |   | |   ├─L2Dwidget.0.min.js\n|   |   | |   ├─L2Dwidget.min.js\n|   |   | |   ├─md5.min.js\n|   |   | |   ├─Meting.min.js\n|   |   | |   ├─socialShare.min.js\n|   |   | |   └Valine.min.js\n|   |   | ├─part : 所有组件加载必要的模块\n|   |   | |  ├─audioplayer.js\n|   |   | |  ├─brand.js\n|   |   | |  ├─codelib.js\n|   |   | |  ├─comment.js\n|   |   | |  ├─extension.js\n|   |   | |  ├─footer.js\n|   |   | |  ├─gallery.js\n|   |   | |  ├─goingto.js\n|   |   | |  ├─hitokoto.js\n|   |   | |  ├─menus.js\n|   |   | |  ├─page.js\n|   |   | |  ├─panels.js\n|   |   | |  ├─pather.js\n|   |   | |  ├─post.js\n|   |   | |  ├─recentposts.js\n|   |   | |  ├─records.js\n|   |   | |  ├─search.js\n|   |   | |  ├─settings.js\n|   |   | |  ├─sitename.js\n|   |   | |  ├─skin.js\n|   |   | |  ├─timeline.js\n|   |   | |  ├─toc.js\n|   |   | |  ├─translater.js\n|   |   | |  ├─xaside.js\n|   |   | |  ├─xcanvas.js\n|   |   | |  ├─xdrawer.js\n|   |   | |  └xsearch.js\n|   |   | ├─common : 包含所有通用JS函数\n|   |   | |   ├─ajax.js\n|   |   | |   ├─api.js\n|   |   | |   ├─config.js\n|   |   | |   ├─fetch.js\n|   |   | |   ├─lang.js\n|   |   | |   ├─part.js\n|   |   | |   ├─storage.js\n|   |   | |   └util.js\n|   |   ├─img : 所有的固定图像资源文件放这\n|   |   |  ├─android-chrome-192x192.png\n|   |   |  ├─android-chrome-512x512.png\n|   |   |  ├─author.large.png\n|   |   |  ├─author.medium.png\n|   |   |  ├─author.small.png\n|   |   |  ├─by-nc-sa.svg\n|   |   |  ├─icon.large.png\n|   |   |  ├─icon.medium.png\n|   |   |  ├─icon.small.png\n|   |   |  ├─qf3cu.huaji.png\n|   |   |  ├─qf3cu.jpg\n|   |   |  ├─qf3cu.png\n|   |   |  ├─qf3cu.temp.bw.png\n|   |   |  ├─qf3cu.temp.png\n|   |   |  ├─qq.png\n|   |   |  ├─start.png\n|   |   |  ├─start.reverse.png\n|   |   |  └wechat.png\n|   |   ├─font : 所有的字体文件放这\n|   |   |  ├─fa-brands-400.eot\n|   |   |  ├─fa-brands-400.svg\n|   |   |  ├─fa-brands-400.ttf\n|   |   |  ├─fa-brands-400.woff\n|   |   |  ├─fa-brands-400.woff2\n|   |   |  ├─fa-regular-400.eot\n|   |   |  ├─fa-regular-400.svg\n|   |   |  ├─fa-regular-400.ttf\n|   |   |  ├─fa-regular-400.woff\n|   |   |  ├─fa-regular-400.woff2\n|   |   |  ├─fa-solid-900.eot\n|   |   |  ├─fa-solid-900.svg\n|   |   |  ├─fa-solid-900.ttf\n|   |   |  ├─fa-solid-900.woff\n|   |   |  ├─fa-solid-900.woff2\n|   |   |  ├─iconfont.eot\n|   |   |  ├─iconfont.svg\n|   |   |  ├─iconfont.ttf\n|   |   |  ├─iconfont.woff\n|   |   |  └SourceHanSansCN.otf\n|   |   ├─css : 所有的样式文件放这\n|   |   |  ├─style.styl : 引用了所有的样式\n|   |   |  ├─_plugin : 所有第三方样式插件\n|   |   |  |    ├─APlayer.min.css\n|   |   |  |    ├─fontawesome.min.css\n|   |   |  |    ├─github-markdown.min.css\n|   |   |  |    ├─highlight.styl\n|   |   |  |    └share.min.css\n|   |   |  ├─_part : 所有组件样式\n|   |   |  |   ├─audioplayer.styl\n|   |   |  |   ├─brand.styl\n|   |   |  |   ├─codelib.styl\n|   |   |  |   ├─comment.styl\n|   |   |  |   ├─extension.styl\n|   |   |  |   ├─footer.styl\n|   |   |  |   ├─gallery.styl\n|   |   |  |   ├─goingto.styl\n|   |   |  |   ├─hitokoto.styl\n|   |   |  |   ├─menus.styl\n|   |   |  |   ├─page.styl\n|   |   |  |   ├─panels.styl\n|   |   |  |   ├─pather.styl\n|   |   |  |   ├─post.styl\n|   |   |  |   ├─recentposts.styl\n|   |   |  |   ├─records.styl\n|   |   |  |   ├─search.styl\n|   |   |  |   ├─settings.styl\n|   |   |  |   ├─sitename.styl\n|   |   |  |   ├─skin.styl\n|   |   |  |   ├─timeline.styl\n|   |   |  |   ├─toc.styl\n|   |   |  |   ├─translater.styl\n|   |   |  |   ├─xaside.styl\n|   |   |  |   ├─xcanvas.styl\n|   |   |  |   ├─xdrawer.styl\n|   |   |  |   └xsearch.styl\n|   |   |  ├─_common : 包含所有页面的通用样式\n|   |   |  |    ├─color.styl : 所有的受皮肤影响的颜色配置\n|   |   |  |    ├─dimension.styl : 所有的固定距离、固定值等配置\n|   |   |  |    └layout.styl : 所有页面通用样式，主要包含“m-”开头的主模板样式\n├─scripts : 主题预处理脚本文件夹\n|    ├─$filter.js\n|    ├─$helper.js\n|    ├─$renderer.js\n|    ├─renderer\n|    |    ├─$partplus.js\n|    |    └$template.js\n|    ├─plugin : 放改过的预处理时用到的第三方插件\n|    |   ├─pangunode.js\n|    |   ├─toc.js\n|    |   ├─hexo-generator-restful\n|    |   |           ├─index.js\n|    |   |           ├─lib\n|    |   |           |  └generator.js\n|    |   ├─hexo-abbrlink\n|    |   |       ├─index.js\n|    |   |       ├─lib\n|    |   |       |  ├─crc16.js\n|    |   |       |  ├─crc32.js\n|    |   |       |  ├─logic.js\n|    |   |       |  └model.js\n|    ├─helper : 放预处理渲染生成期间用到的函数\n|    |   ├─$count.js\n|    |   ├─$css.js\n|    |   ├─$encode.js\n|    |   ├─$forIn.js\n|    |   ├─$gallery.js\n|    |   ├─$js.js\n|    |   ├─$min2read.js\n|    |   ├─$mjs.js\n|    |   ├─$nomjs.js\n|    |   ├─$word4post.js\n|    |   └$word4site.js\n├─layout : 主题预处理页面模板文件夹\n|   ├─archive.ejs : 管理所有归档页面头部涉及的数据\n|   ├─index.ejs : 管理首页面头部涉及的数据\n|   ├─page.ejs : 管理所有单独页面头部涉及的数据\n|   ├─post.ejs : 管理所有文章页面头部涉及的数据\n|   ├─_partial\n|   |    └frame.ejs : 网页模板，增减改组件和修改头部模板时涉及\n```\n\n## 普通使用主题时涉及的文件及文件夹\n\n```\n├─_config.yml : 主题配置文件，改菜单、改图标、改皮肤、改音乐/一言组件配置、新增组件时涉及\n├─source : 主题资源文件夹\n|   ├─asset\n|   |   ├─part : 所有组件模板文件放这\n|   |   ├─lang : 所有的语言界面资源文件放这\n|   |   |  ├─en.yml : 英文\n|   |   |  └zh-cn.yml : 中文\n|   |   ├─js : 所有的JS资源文件放这\n|   |   | ├─main.js : 管理所有资源的加载和程序\n|   |   | ├─part : 所有组件加载必要的模块\n|   |   ├─css : 所有的样式文件放这\n|   |   |  ├─style.styl : 引用了所有的样式\n|   |   |  ├─_part : 所有组件样式\n├─layout : 主题预处理页面模板文件夹\n|   ├─_partial\n|   |    └frame.ejs : 网页模板，增减改组件和修改头部模板时涉及\n```\n\n# source目录结构\n\n再来看看[source](//github.com/jinyaoMa/ma-jinyao.cn/tree/master/source)的目录结构。\n\n```\n├─CNAME : 锁定github pages域名定向\n├─_posts : 所有的文章\n|   ├─Gallery-Post-Not-Supported.md\n|   ├─Hello-Hexo.md\n|   ├─Helpful-Links.md\n|   ├─HTTP是什么？.md\n|   ├─Markdown-Basic-Syntax.md\n|   ├─Oracle-SQL-Basic-Usage.md\n|   ├─TCP-IP是什么？.md\n|   ├─主题hexo-theme-mustom使用指南.md\n|   ├─旧版日记仿markdown编译代码.md\n|   ├─测试区2048JS代码.md\n|   └网易云音乐歌单JS音乐播放器JS代码.md\n├─resume : 这是个“简历小贴士”单页面\n|   └index.md\n├─records : 这是个“记录”单页面\n|    ├─content.yml : 记录组件加载时从这里读取数据\n|    └index.md\n├─library : 这是个“代码库”单页面\n|    └index.md\n├─letter : 这是个“求职信小贴士”单页面\n|   └index.md\n├─gallery : 这是个“图库”单页面\n|    ├─FaceQ1583444636773.png\n|    ├─http-request-example.jpg\n|    ├─http-request-format.png\n|    ├─http-response-example.jpg\n|    ├─http-response-format.png\n|    ├─index.md\n|    ├─tcp-ip-ipv6-prefix.jpg\n|    ├─tcp-ip-router-network.jpg\n|    ├─tcp-ip-router-subnet.jpg\n|    ├─wallpaper-2311325.jpg\n|    ├─wallpaper-2572384.jpg\n|    ├─wallpaper-878514.jpg\n|    ├─yao2048-0.jpg\n|    └yaoplayer-0.jpg\n├─extension : 这个是本站左下角的扩展功能\n|     ├─content.yml : 扩展组件加载时从这里读取数据\n|     ├─test : “测试”扩展\n|     ├─resume : “简历生成”扩展\n|     ├─palette : “图像颜色提取”扩展\n|     ├─letter : “求职信”扩展\n├─code : 所有使用Hexo标签“include_code”的代码文件都放这\n├─about : 这是个“关于”单页面\n|   └index.md\n```\n\n# 新建单页面例子\n\n**注：需要以scaffolds/page.md模板为前提**\n\n假如我要新建一个“友链”单页面，我需要运行新建命令：\n\n``` bash\nhexo new page \"links\"\n```\n\n运行命令后得到以下新目录结构\n\n```\n├─_posts\n├─resume\n├─records\n├─links : 新“友链”单页面\n|   └index.md : 模板生成的index.md\n├─library\n├─letter\n├─gallery\n├─extension\n├─code\n├─about\n```\n\n如何修改`links/index.md`可以参考[about/index.md](//raw.githubusercontent.com/jinyaoMa/ma-jinyao.cn/master/source/about/index.md)\n\n## 添加菜单项目\n\n在主题配置`_config.yml`中，按格式新增`menus`下的项目\n\n``` yml\nmenus:\n  main: # 项目组\n    home: # 项目\n      url: / # 项目链接\n      icon: '<i class=\"fas fa-home fa-fw\"></i>' # 项目图标\n    archive: # 项目\n      url: /archives/ # 项目链接\n      icon: '<i class=\"fas fa-archive fa-fw\"></i>' # 项目图标\n    about: # 项目\n      url: /about/ # 项目链接\n      icon: '<i class=\"fas fa-user fa-fw\"></i>' # 项目图标\n    links: # 新项目 <----------------------------------------------------\n      url: /links/  # 新项目链接 <----------------------------------------\n      icon: '<i class=\"fas fa-link fa-fw\"></i>' # 新项目图标 <------------\n```\n\n接下来，在主题`source/asset/lang`文件夹中的`.yml`语言文件新增`menus`下的项目\n\n``` yml\nmenus:\n  main: # 对应_config.yml中的项目组\n    caption: 本站 # 项目组名称\n    items: # 对应_config.yml中的项目\n      home: 首页 # 项目名称\n      archive: 归档 # 项目名称\n      about: 关于 # 项目名称\n      links: 友链 # 新项目名称 <-----------------------------------------\n```\n\n# 新建文章例子\n\n**注：需要以scaffolds/post.md模板为前提**\n\n假如我要新建一个“HTTP是什么？”文章，我需要运行新建命令：\n\n``` bash\nhexo new \"HTTP是什么？\"\n```\n\n运行命令后得到以下新目录结构\n\n```\n├─_posts\n|   └HTTP是什么？.md : 新“HTTP是什么？”文章\n├─resume\n├─records\n├─links\n├─library\n├─letter\n├─gallery\n├─extension\n├─code\n├─about\n```\n\n打开`HTTP是什么？.md`，可以看到front-matter中没有abbrlink，没有关系，这是自动生成。**如果文章里使用了MathJax，需要设置`mathjax: true`。**\n\n``` yml\n---\ntitle: HTTP是什么？\ncategories:\n  - - null # 分类设置\ntags:\n  - null # 标签设置\nmathjax: false\ndate: 2020-04-10 14:15:34\nupdated: 2020-04-10 14:15:34\n---\n```\n\n# 添加组件例子\n\n假如我要在“友链”单页面里添加一个像\"记录\"单页面下的记录组件，命名为`links`组件：\n\n**首先，在Hexo根目录下`source/links`文件夹建立一个`content.yml`用以记录友链，里面的内容可以是这样的：**\n\n``` yml source/links/content.yml\n# 友链模板\n- name: jinyaoMa\n  site: //ma-jinyao.cn\n  avatar: //ma-jinyao.cn/asset/img/author.medium.png\n# 其他友链\n- name: Test\n  site: //baidu.com\n  avatar: \"\"\n\n# ...以此类推\n```\n\n**然后，在主题目录`themes/mustom`新建和修改以下必要的文件：**\n\n```\n├─_config.yml : 添加需要的图标\n├─source\n|   ├─asset\n|   |   ├─part\n|   |   |  └links.ejs : 必要“组件模板”\n|   |   ├─lang\n|   |   |  ├─en.yml : 添加需要的英文文本\n|   |   |  └zh-cn.yml : 添加需要的中文文本\n|   |   ├─js\n|   |   | ├─part\n|   |   | |  └links.js : 必要“JS加载模块”\n|   |   ├─css\n|   |   |  ├─_part\n|   |   |  |   └links.styl : 必要“组件样式”\n```\n\n`links.ejs`：可以参照[asset/part/records.ejs](//raw.githubusercontent.com/jinyaoMa/ma-jinyao.cn/master/themes/mustom/source/asset/part/records.ejs)组件模板，刚开始可以只有以下部分：\n\n``` html asset/part/links.ejs\n<div class=\"p-links\"><!-- 注意类名 -->\n  <div class=\"p-links-caption\"><!-- 窗口标题部分 -->\n    <%- theme.links.icon %><!-- 窗口标题图标 -->\n    <span data-lang=\"links.caption\"><!-- 加载语言文件中links.caption的字符串 --></span>\n  </div>\n<div>\n```\n\n在`_config.yml`中添加以下代码：\n\n``` yml\nlinks:\n  icon: '<i class=\"fas fa-link fa-fw\"></i>'\n```\n\n在`en.yml`和`zh-cn.yml`中添加以下代码：\n\n``` yml en.yml\nlinks:\n  caption: LINKS\n```\n\n``` yml zh-cn.yml\nlinks:\n  caption: 友链\n```\n\n`links.js`：可以参照[asset/js/part/records.js](//raw.githubusercontent.com/jinyaoMa/ma-jinyao.cn/master/themes/mustom/source/asset/js/part/records.js)加载模块，刚开始可以只有以下部分：\n\n``` js asset/js/part/links.js\nimport part from \"../common/part.js\";\nlet tag = 'links'; // 注意标签名\nlet element = null;\nconst init = (params, callback) => {\n  part(tag, el => {\n    element = el;\n    document.querySelector(tag).replaceWith(element);\n    callback && callback(element);\n  });\n};\nexport default {\n  tag,\n  init\n};\n```\n\n`links.styl`：可以参照[asset/css/_part/records.styl](//raw.githubusercontent.com/jinyaoMa/ma-jinyao.cn/master/themes/mustom/source/asset/css/_part/records.styl)组件样式，刚开始可以什么样式都没有。\n\n**完成必要文件的新建之后，就要把这个组件加载到页面上，需要修改一下文件：**\n\n在Hexo根目录`source/links/index.md`里面的front-matter中标记这个组件。\n\n``` yml source/links/index.md\n---\ntitle: links\nlayout: page\nname: links\nparts: \n  - page\n  - links # 标记组件\n---\n```\n\n在`themes/mustom`主题目录中`source/asset/css/style.styl`引用`links.styl`。\n\n``` styl \n// 文件末尾添加\n@import '_part/links'\n```\n\n在`themes/mustom`主题目录中`source/asset/js/main.js`对号插入以下代码：\n\n``` js\n// 头部所有import下面\nimport links from './part/links.js';\n\n/* Ctrl+F 查找 “Extra Operations”，在“Extra Operations”下添加代码加载组件到“links”单页面 */\n// Extra Operations\nif (/^\\/(links)\\//.test(pathname())) {\n  ajax({\n    url: `/links/content.json`, // content.yml 预编译成的JSON文件，友链的记录文件\n    method: 'get',\n    dataType: 'json',\n    success(data) {\n      parts.includes('links') && links.init({\n        data\n      }, el => {\n        checklist.links = true;\n        progress.step(stepping);\n      });\n    }\n  });\n}\n```\n\n在`themes/mustom`主题目录中`layout/_partial/frame.ejs`中`div.m-content`插入组件标签`<links></links>`。\n\n**通过以上步骤就能把组件添加到单页面“友链”中**\n\n# 删除单页面组件\n\n想要停用某个单页面组件只要在单页面所属`source/YourPage/index.md`里面的front-matter中注释掉组件标记即可，例如：\n\n``` yml\n---\ntitle: links\nlayout: page\nname: links\nparts: \n  - page\n  # - links # 注释掉组件标记\n---\n```\n\n**_本文章转载于_**(https://ma-jinyao.cn/posts/49651)\n","categories":["Hexo"],"tags":["Mustom"]}]